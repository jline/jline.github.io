"use strict";(self.webpackChunkjline_docs=self.webpackChunkjline_docs||[]).push([[2443],{5874:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>d,contentTitle:()=>o,default:()=>h,frontMatter:()=>s,metadata:()=>r,toc:()=>a});const r=JSON.parse('{"id":"architecture","title":"JLine Architecture","description":"This page provides a high-level overview of JLine\'s architecture and how its components interact with each other.","source":"@site/docs/architecture.md","sourceDirName":".","slug":"/architecture","permalink":"/docs/architecture","draft":false,"unlisted":false,"editUrl":"https://github.com/jline/jline.github.io/edit/main/docs/architecture.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"sidebar_position":2},"sidebar":"tutorialSidebar","previous":{"title":"Getting Started with JLine","permalink":"/docs/intro"},"next":{"title":"Terminal Handling","permalink":"/docs/terminal"}}');var l=i(4848),t=i(8453);const s={sidebar_position:2},o="JLine Architecture",d={},a=[{value:"Component Overview",id:"component-overview",level:2},{value:"Core Components",id:"core-components",level:2},{value:"Terminal",id:"terminal",level:3},{value:"LineReader",id:"linereader",level:3},{value:"Higher-Level APIs",id:"higher-level-apis",level:3},{value:"Data Flow",id:"data-flow",level:2},{value:"Module Dependencies",id:"module-dependencies",level:2},{value:"Key Interfaces",id:"key-interfaces",level:2},{value:"Customization Points",id:"customization-points",level:2},{value:"Common Usage Patterns",id:"common-usage-patterns",level:2},{value:"Basic Terminal and LineReader",id:"basic-terminal-and-linereader",level:3},{value:"Adding Tab Completion",id:"adding-tab-completion",level:3},{value:"Using History",id:"using-history",level:3},{value:"Conclusion",id:"conclusion",level:2}];function c(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.header,{children:(0,l.jsx)(n.h1,{id:"jline-architecture",children:"JLine Architecture"})}),"\n",(0,l.jsx)(n.p,{children:"This page provides a high-level overview of JLine's architecture and how its components interact with each other."}),"\n",(0,l.jsx)(n.h2,{id:"component-overview",children:"Component Overview"}),"\n",(0,l.jsx)(n.p,{children:"JLine is organized into several core components that work together to provide a complete terminal handling and line editing solution:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{children:"\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                        JLine Architecture                       \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                                 \u2502\n                                 \u25bc\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                            Terminal                             \u2502\n\u2502                                                                 \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502\n\u2502  \u2502    Jansi    \u2502  \u2502     JNA     \u2502  \u2502     FFM     \u2502  \u2502   Exec  \u2502 \u2502\n\u2502  \u2502   Provider  \u2502  \u2502   Provider  \u2502  \u2502   Provider  \u2502  \u2502 Provider\u2502 \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                                 \u2502\n                                 \u25bc\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                           LineReader                            \u2502\n\u2502                                                                 \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502\n\u2502  \u2502   Parser    \u2502  \u2502  Completer  \u2502  \u2502   History   \u2502  \u2502 Widgets \u2502 \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                                 \u2502\n                                 \u25bc\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                        Higher-Level APIs                        \u2502\n\u2502                                                                 \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502\n\u2502  \u2502    Style    \u2502  \u2502   Builtins  \u2502  \u2502  Console   \u2502  \u2502Console UI\u2502 \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n"})}),"\n",(0,l.jsx)(n.h2,{id:"core-components",children:"Core Components"}),"\n",(0,l.jsx)(n.h3,{id:"terminal",children:"Terminal"}),"\n",(0,l.jsxs)(n.p,{children:["The ",(0,l.jsx)(n.code,{children:"Terminal"})," component is the foundation of JLine. It provides:"]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Access to the underlying terminal device"}),"\n",(0,l.jsx)(n.li,{children:"Raw mode for character-by-character input"}),"\n",(0,l.jsx)(n.li,{children:"ANSI escape sequence handling"}),"\n",(0,l.jsx)(n.li,{children:"Terminal size information"}),"\n",(0,l.jsx)(n.li,{children:"Signal handling (e.g., window resize, Ctrl+C)"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:"The Terminal layer uses different providers (Jansi, JNA, FFM, etc.) to interact with the native terminal capabilities on different platforms."}),"\n",(0,l.jsx)(n.h3,{id:"linereader",children:"LineReader"}),"\n",(0,l.jsxs)(n.p,{children:["The ",(0,l.jsx)(n.code,{children:"LineReader"})," builds on top of the Terminal to provide:"]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Line editing capabilities"}),"\n",(0,l.jsx)(n.li,{children:"History management"}),"\n",(0,l.jsx)(n.li,{children:"Tab completion"}),"\n",(0,l.jsx)(n.li,{children:"Key binding"}),"\n",(0,l.jsx)(n.li,{children:"Widget system for custom functionality"}),"\n",(0,l.jsx)(n.li,{children:"Multi-line editing"}),"\n",(0,l.jsx)(n.li,{children:"Syntax highlighting"}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"higher-level-apis",children:"Higher-Level APIs"}),"\n",(0,l.jsx)(n.p,{children:"JLine includes several higher-level modules that provide additional functionality:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Style"}),": Styling API for terminal output"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Builtins"}),": Ready-to-use commands and utilities"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Console"}),": Framework for building interactive console applications"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Console UI"}),": UI components like progress bars, tables, and forms"]}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"data-flow",children:"Data Flow"}),"\n",(0,l.jsx)(n.p,{children:"Here's how data flows through the JLine system:"}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsxs)(n.li,{children:["The ",(0,l.jsx)(n.code,{children:"Terminal"})," captures raw input from the user"]}),"\n",(0,l.jsx)(n.li,{children:"Input is processed through key bindings and widgets"}),"\n",(0,l.jsxs)(n.li,{children:["The ",(0,l.jsx)(n.code,{children:"LineReader"})," applies editing operations based on the input"]}),"\n",(0,l.jsxs)(n.li,{children:["When the user presses Enter, the ",(0,l.jsx)(n.code,{children:"LineReader"})," returns the completed line"]}),"\n",(0,l.jsx)(n.li,{children:"The application processes the line and may use higher-level APIs for output"}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"module-dependencies",children:"Module Dependencies"}),"\n",(0,l.jsx)(n.p,{children:"The modules have the following dependency relationships:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{children:"jline-terminal\n    \u2191\njline-reader\n    \u2191\njline-style\n    \u2191\njline-builtins\n    \u2191\njline-console\n    \u2191\njline-console-ui\n"})}),"\n",(0,l.jsx)(n.h2,{id:"key-interfaces",children:"Key Interfaces"}),"\n",(0,l.jsx)(n.p,{children:"JLine defines several key interfaces that you'll work with:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"Terminal"}),": Represents the terminal device"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"LineReader"}),": Reads lines of input with editing capabilities"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"Completer"}),": Provides tab completion suggestions"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"History"}),": Manages command history"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"Parser"}),": Parses input lines into tokens"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"Widget"}),": Implements custom functionality for the line reader"]}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"customization-points",children:"Customization Points"}),"\n",(0,l.jsx)(n.p,{children:"JLine is highly customizable through several extension points:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Terminal Providers"}),": Choose or implement different terminal backends"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Completers"}),": Create custom completion logic"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Widgets"}),": Add new editing functions"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Key Bindings"}),": Map keys to specific actions"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Highlighters"}),": Implement syntax highlighting"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"History"}),": Customize history storage and retrieval"]}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"common-usage-patterns",children:"Common Usage Patterns"}),"\n",(0,l.jsx)(n.h3,{id:"basic-terminal-and-linereader",children:"Basic Terminal and LineReader"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-java",children:'// Create a terminal\nTerminal terminal = TerminalBuilder.builder()\n        .system(true)\n        .build();\n\n// Create a line reader\nLineReader reader = LineReaderBuilder.builder()\n        .terminal(terminal)\n        .build();\n\n// Read input\nString line = reader.readLine("prompt> ");\n'})}),"\n",(0,l.jsx)(n.h3,{id:"adding-tab-completion",children:"Adding Tab Completion"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-java",children:'// Create a completer\nCompleter completer = new StringsCompleter("command1", "command2", "help", "quit");\n\n// Create a line reader with completion\nLineReader reader = LineReaderBuilder.builder()\n        .terminal(terminal)\n        .completer(completer)\n        .build();\n'})}),"\n",(0,l.jsx)(n.h3,{id:"using-history",children:"Using History"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-java",children:'// Create a history file\nPath historyFile = Paths.get(System.getProperty("user.home"), ".myapp_history");\n\n// Create a line reader with history\nLineReader reader = LineReaderBuilder.builder()\n        .terminal(terminal)\n        .variable(LineReader.HISTORY_FILE, historyFile)\n        .build();\n'})}),"\n",(0,l.jsx)(n.h2,{id:"conclusion",children:"Conclusion"}),"\n",(0,l.jsx)(n.p,{children:"JLine's architecture provides a flexible and powerful foundation for building command-line applications. By understanding how the components interact, you can leverage JLine's capabilities to create sophisticated terminal interfaces."}),"\n",(0,l.jsx)(n.p,{children:"For more detailed information about each component, refer to the specific documentation pages."})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,l.jsx)(n,{...e,children:(0,l.jsx)(c,{...e})}):c(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>s,x:()=>o});var r=i(6540);const l={},t=r.createContext(l);function s(e){const n=r.useContext(t);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:s(e.components),r.createElement(t.Provider,{value:n},e.children)}}}]);